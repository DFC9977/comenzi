<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin ‚Äî Gosbi</title>
  <style>
    :root {
      --bg: #0b0f14;
      --card: #121924;
      --line: #1e2d3d;
      --text: #e8eef6;
      --muted: #9fb0c3;
      --primary: #4da3ff;
      --ok: #35d07f;
      --danger: #ff5d5d;
      --warn: #f5a623;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { min-height: 100%; }
    body {
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(800px 400px at 20% 0%, rgba(77,163,255,.10), transparent 60%),
                  radial-gradient(700px 400px at 80% 20%, rgba(53,208,127,.07), transparent 60%),
                  var(--bg);
      color: var(--text);
      font-size: 15px;
      line-height: 1.5;
    }

    /* ---- TOPBAR ---- */
    .topbar {
      position: sticky; top: 0; z-index: 100;
      display: flex; align-items: center; justify-content: space-between;
      padding: 12px 16px;
      background: rgba(11,15,20,.92);
      border-bottom: 1px solid var(--line);
      backdrop-filter: blur(10px);
      gap: 10px;
    }
    .topbar-brand { font-weight: 900; font-size: 18px; }
    .topbar-brand span { color: var(--primary); }
    .topbar-right { display: flex; align-items: center; gap: 8px; }
    .topbar-right button {
      padding: 8px 14px; border-radius: 10px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06); color: #fff;
      font-weight: 700; font-size: 14px; cursor: pointer;
    }

    /* ---- TABS ---- */
    .tabs-wrap {
      overflow-x: auto; -webkit-overflow-scrolling: touch;
      border-bottom: 1px solid var(--line);
      background: rgba(11,15,20,.6);
      backdrop-filter: blur(8px);
      position: sticky; top: 57px; z-index: 90;
    }
    .tabs {
      display: flex; gap: 0;
      padding: 0 16px;
      min-width: max-content;
    }
    .tab {
      padding: 14px 18px;
      font-weight: 700; font-size: 14px;
      color: var(--muted);
      border-bottom: 2px solid transparent;
      cursor: pointer;
      white-space: nowrap;
      transition: color .15s, border-color .15s;
      background: none; border-top: none; border-left: none; border-right: none;
    }
    .tab.active { color: var(--primary); border-bottom-color: var(--primary); }

    /* ---- CONTAINER ---- */
    .container {
      max-width: 700px;
      margin: 0 auto;
      padding: 16px 14px 60px;
    }

    /* ---- TAB PANELS ---- */
    .tab-panel { display: none; }
    .tab-panel.active { display: block; }

    /* ---- AUTH CARD ---- */
    .auth-card {
      background: rgba(18,25,36,.95);
      border: 1px solid var(--line);
      border-radius: 18px;
      padding: 20px;
      margin-bottom: 20px;
    }
    .auth-card input {
      width: 100%; padding: 14px; border-radius: 12px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06); color: #fff;
      font-size: 16px; margin-bottom: 10px;
    }
    .auth-card input:focus { outline: none; border-color: var(--primary); }
    .auth-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 4px; }
    .btn-primary {
      padding: 14px; border-radius: 12px; border: none;
      background: var(--primary); color: #07111d;
      font-weight: 900; font-size: 16px; cursor: pointer;
    }
    .btn-ghost {
      padding: 14px; border-radius: 12px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06); color: #fff;
      font-weight: 700; font-size: 15px; cursor: pointer;
    }
    #me { font-size: 13px; opacity: .6; margin-top: 10px; }
    #err { font-size: 14px; margin-top: 8px; min-height: 18px; }

    /* ---- SECTION TITLES ---- */
    .section-title {
      font-size: 11px; font-weight: 800; opacity: .45;
      text-transform: uppercase; letter-spacing: .8px;
      margin: 20px 0 10px;
    }

    /* ---- ADMIN SECTIONS hidden until logged in ---- */
    .admin-section { display: none; }
  </style>
</head>
<body>

<!-- TOPBAR -->
<div class="topbar">
  <div class="topbar-brand">Gosbi <span>Admin</span></div>
  <div class="topbar-right" id="me"></div>
</div>

<!-- TABS -->
<div class="tabs-wrap admin-section">
  <div class="tabs">
    <button class="tab active" data-panel="panelClients">üë• Clien»õi</button>
    <button class="tab" data-panel="panelPromotions">üì£ Promo»õii</button>
    <button class="tab" data-panel="panelNotifications">üì± NotificƒÉri</button>
    <button class="tab" data-panel="panelCounties">üó∫ Jude»õe</button>
  </div>
</div>

<div class="container">

  <!-- AUTH -->
  <div class="auth-card" id="authCard">
    <div style="font-weight:900; font-size:16px; margin-bottom:12px;">Autentificare Admin</div>
    <input id="phone" type="tel" placeholder="Telefon (ex: 0744...)" autocomplete="username" />
    <input id="pass" type="password" placeholder="ParolƒÉ" autocomplete="current-password" />
    <div class="auth-btns">
      <button class="btn-primary" id="btnLogin">IntrƒÉ</button>
      <button class="btn-ghost" id="btnLogout">Ie»ôi</button>
    </div>
    <div id="err"></div>
  </div>

  <!-- ===== TAB: CLIEN»öI ===== -->
  <div class="tab-panel active admin-section" id="panelClients">

    <div class="section-title">‚è≥ Clien»õi √Æn a»ôteptare</div>
    <div id="pending"></div>

    <div class="section-title" style="margin-top:28px;">‚úÖ Clien»õi activi</div>
    <div id="active"></div>

  </div>

  <!-- ===== TAB: PROMO»öII ===== -->
  <div class="tab-panel admin-section" id="panelPromotions">
    <div class="section-title">üì£ Gestionare promo»õii</div>
    <div style="font-size:13px; opacity:.6; margin-bottom:14px;">
      Promo»õiile publicate apar la clien»õi √Æntr-un tab dedicat, cu notificare pentru promo»õii necitite.
    </div>
    <div id="promotionsContainer"></div>
  </div>

  <!-- ===== TAB: NOTIFICƒÇRI WhatsApp ===== -->
  <div class="tab-panel admin-section" id="panelNotifications">
    <div class="section-title">üì± NotificƒÉri livrare per jude»õ</div>
    <div style="font-size:13px; opacity:.6; margin-bottom:14px;">
      SelecteazƒÉ jude»õul, editeazƒÉ mesajul »ôi trimite WhatsApp fiecƒÉrui client activ din acel jude»õ.
    </div>
    <div id="notificationsContainer"></div>
  </div>

  <!-- ===== TAB: JUDE»öE ===== -->
  <div class="tab-panel admin-section" id="panelCounties">
    <div class="section-title">üó∫ Configurare jude»õe & zile livrare</div>
    <div style="font-size:13px; opacity:.6; margin-bottom:14px;">
      SeteazƒÉ ziua fixƒÉ de livrare per jude»õ. Aceasta se aplicƒÉ automat clien»õilor din acel jude»õ.
    </div>
    <div id="countiesContainer"></div>
  </div>

</div>

<!-- TABS JS -->
<script>
  const tabs = document.querySelectorAll(".tab");
  const panels = document.querySelectorAll(".tab-panel");

  function activateTabById(panelId) {
    tabs.forEach(t => t.classList.remove("active"));
    panels.forEach(p => p.classList.remove("active"));
    const panel = document.getElementById(panelId);
    if (panel) panel.classList.add("active");
    const tab = document.querySelector(`.tab[data-panel="${panelId}"]`);
    if (tab) tab.classList.add("active");
  }

  tabs.forEach(tab => {
    tab.addEventListener("click", () => activateTabById(tab.dataset.panel));
  });

  // Detec»õie hash din URL: admin.html#promotions / #counties / #clients
  const hashMap = {
    clients:     "panelClients",
    promotions:  "panelPromotions",
    counties:    "panelCounties",
    notifications: "panelNotifications",
  };
  const hash = location.hash.replace("#", "");
  if (hashMap[hash]) {
    const targetPanel = hashMap[hash];
    let attempts = 0;
    const interval = setInterval(() => {
      attempts++;
      const tabsWrap = document.querySelector(".tabs-wrap");
      if (tabsWrap && getComputedStyle(tabsWrap).display !== "none") {
        activateTabById(targetPanel);
        clearInterval(interval);
      }
      if (attempts >= 30) {
        activateTabById(targetPanel);
        clearInterval(interval);
      }
    }, 100);
  }
</script>

<script type="module" src="./admin.js"></script>
</body>
</html>